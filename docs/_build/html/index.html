
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" lang="python">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Welcome to reprozip-news-app&#39;s documentation! &#8212; reprozip-news-app 2019-2-17 documentation</title>
    <link rel="stylesheet" href="_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="nav-item nav-item-0"><a href="#">reprozip-news-app 2019-2-17 documentation</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="welcome-to-reprozip-news-app-s-documentation">
<h1>Welcome to reprozip-news-app's documentation!<a class="headerlink" href="#welcome-to-reprozip-news-app-s-documentation" title="Permalink to this headline">¶</a></h1>
<p>Here is an introduction for how to use reprounzip</p>
<ol class="arabic simple">
<li>Introduction</li>
<li>Prerequisites</li>
<li>Development Install</li>
</ol>
<div class="section" id="prototype-news-archiving-app">
<h2>Prototype News Archiving App<a class="headerlink" href="#prototype-news-archiving-app" title="Permalink to this headline">¶</a></h2>
<p>A work-in-progress app that leverages ReproZip and Webrecorder to capture archival packages of data journalism websites.</p>
</div>
<div class="section" id="prerequisites">
<h2>Prerequisites<a class="headerlink" href="#prerequisites" title="Permalink to this headline">¶</a></h2>
<p>You will need to install the Docker server and havie it running on your system. See <a class="reference external" href="https://docs.docker.com">this link</a>.</p>
<p>You will also nedd Python 3 and pip. One way to do this is using Pyenv. For example, on OSX command line (using <a class="reference external" href="https://brew.sh/">Homebrew</a>):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">brew</span> <span class="n">install</span> <span class="n">pyenv</span>
</pre></div>
</div>
<p>On Debian/Ubuntu:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sudo</span> <span class="n">apt</span> <span class="n">install</span> <span class="n">python3</span><span class="o">.</span><span class="mi">7</span> <span class="n">python3</span><span class="o">.</span><span class="mi">7</span><span class="o">-</span><span class="n">dev</span> <span class="n">virtualenv</span> <span class="n">docker</span><span class="o">.</span><span class="n">io</span>
</pre></div>
</div>
</div>
<div class="section" id="development-install">
<h2>Development Install<a class="headerlink" href="#development-install" title="Permalink to this headline">¶</a></h2>
<p>At some point the app will likely be installed from a registry, like most Python libraries. For now, it must be installed from a local directory.</p>
<p>Recommendation: Use pyenv and virtualenv (or pipenv) to create a self-contained virtual environment:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ pyenv local 3.7
$ pip install virtualenv
$ virtualenv .
$ source bin/activate
</pre></div>
</div>
<p>Note that the port number will depend on the webserver you captured in step 1. A Rails app will likely run on port 3000, a NodeJS app will likely run on port 8000.</p>
<p>Now clone the repo and cd into it:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ git clone https://github.com/reprozip-news-apps/reprozip-news-apps
$ cd reprozip-news-apps
</pre></div>
</div>
<p>Now install dependencies and the app into your virtualenv. Note that reprounzip-docker must be installed from Github for now.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ pip install -r requirements.txt
$ pip install -e .
</pre></div>
</div>
<p>In case you met error called &quot;Found existing installation&quot;, you can run above command as</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ pip install -r requirements.txt --ignore-installed
$ pip install -e .
</pre></div>
</div>
</div>
<div class="section" id="archiving-a-news-app">
<h2>Archiving a news app<a class="headerlink" href="#archiving-a-news-app" title="Permalink to this headline">¶</a></h2>
<p>Below is an instruction to pack and unpack a news app from <a class="reference external" href="https://www.propublica.org/">ProPublica</a></p>
<div class="section" id="step-1-package-a-site-using-reprozip">
<h3>Step 1: Package a site using ReproZip<a class="headerlink" href="#step-1-package-a-site-using-reprozip" title="Permalink to this headline">¶</a></h3>
<p>Skip to step 2 if you already have an RPZ package. Otherwise, see <a class="reference external" href="https://reprozip.readthedocs.io/en/1.0.x/packing.html">reprozip documentation:</a>. Reprozip only runs on Linux.</p>
</div>
<div class="section" id="step-2-record-the-site-assets-from-the-rpz-using-webrecord">
<h3>Step 2: Record the site assets from the RPZ using Webrecord<a class="headerlink" href="#step-2-record-the-site-assets-from-the-rpz-using-webrecord" title="Permalink to this headline">¶</a></h3>
<p>You need an RPZ package and you need to know what port the packaged application runs on. Please make sure that docker is running
and the port you want to use is available.</p>
<p>You can check if docker is running by</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">docker</span> <span class="n">ps</span>
</pre></div>
</div>
<p>This command will return <code class="docutils literal notranslate"><span class="pre">Cannot</span> <span class="pre">connect</span> <span class="pre">to</span> <span class="pre">the</span> <span class="pre">Docker</span> <span class="pre">daemon</span></code> if docker is running. Otherwise, it will return a table that lists all docker container.
To stop a container at certain port</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">docker</span> <span class="n">stop</span> <span class="n">container_id</span>
</pre></div>
</div>
<p>For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">reprounzip</span> <span class="n">dj</span> <span class="n">record</span> <span class="n">dollar4docs</span><span class="o">-</span><span class="mf">20170309.</span><span class="n">rpz</span> <span class="n">target</span> <span class="o">--</span><span class="n">port</span> <span class="mi">3000</span>
</pre></div>
</div>
<p>Note that the port number will depend on the webserver you captured in step 1. A Rails app will likely run on port 3000, a NodeJS app will likely run on port 8000.</p>
<p>You should see the WARC_DATA directory in the package now. For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ tar -t -f dollar4docs-20170309.rpz
-rw-------  0 root   root 729415801 Mar  9  2017 DATA.tar.gz
-rw-------  0 root   root        19 Mar  9  2017 METADATA/version
-rw-r--r--  0 root   root   5912576 Mar  9  2017 METADATA/trace.sqlite3
-rw-------  0 root   root    293142 Mar  9  2017 METADATA/config.yml
-rw-r--r--  0 hoffman staff   807498 Jan 11 09:16 WARC_DATA/rec-20190111141622981410-anything.local.warc.gz
-rw-r--r--  0 hoffman staff    37089 Jan 11 09:16 WARC_DATA/autoindex.cdxj
</pre></div>
</div>
</div>
<div class="section" id="step-3-replay-the-site-and-verify-fidelity">
<h3>Step 3: Replay the site and verify fidelity<a class="headerlink" href="#step-3-replay-the-site-and-verify-fidelity" title="Permalink to this headline">¶</a></h3>
<p>Run command</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ reprounzip dj playback dollar4docs-20170309.rpz target --port 3000
</pre></div>
</div>
<p>Now tab to your Chromium browser, turn off your wifi, and hit reload! Press Enter in your terminal session to shut everything down.</p>
</div>
<div class="section" id="skipping-reprounzip-unpacking-on-subsequent-runs">
<h3>Skipping reprounzip unpacking on subsequent runs<a class="headerlink" href="#skipping-reprounzip-unpacking-on-subsequent-runs" title="Permalink to this headline">¶</a></h3>
<p>When you finish recording, or exit a playback session, the unpacked container will be destroyed. You can prevent that from happening by using the --skip-destroy flag:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ reprounzip dj playback dollar4docs-20170309.rpz target --port 3000 --skip-destroy
</pre></div>
</div>
<p>Then you can reuse the container on another playback session:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ reprounzip dj playback dollar4docs-20170309.rpz target --port 3000 --skip-setup --skip-run
</pre></div>
</div>
</div>
</div>
<div class="section" id="flags">
<h2>Flags<a class="headerlink" href="#flags" title="Permalink to this headline">¶</a></h2>
<p><code class="code docutils literal notranslate"><span class="pre">--standalone</span></code></p>
<p><code class="code docutils literal notranslate"><span class="pre">--port</span></code></p>
<p><code class="code docutils literal notranslate"><span class="pre">--skip-setup</span></code></p>
<p><code class="code docutils literal notranslate"><span class="pre">--skip-run</span></code></p>
<p><code class="code docutils literal notranslate"><span class="pre">--skip-destroy</span></code></p>
<p><code class="code docutils literal notranslate"><span class="pre">--skip-record</span></code></p>
<p><code class="code docutils literal notranslate"><span class="pre">--keep-browser</span></code></p>
<p><code class="code docutils literal notranslate"><span class="pre">--quiet</span></code></p>
<div class="toctree-wrapper compound">
</div>
</div>
</div>
<div class="section" id="indices-and-tables">
<h1>Indices and tables<a class="headerlink" href="#indices-and-tables" title="Permalink to this headline">¶</a></h1>
<ul class="simple">
<li><a class="reference internal" href="genindex.html"><span class="std std-ref">Index</span></a></li>
<li><a class="reference internal" href="py-modindex.html"><span class="std std-ref">Module Index</span></a></li>
<li><a class="reference internal" href="search.html"><span class="std std-ref">Search Page</span></a></li>
</ul>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="#">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Welcome to reprozip-news-app's documentation!</a><ul>
<li><a class="reference internal" href="#prototype-news-archiving-app">Prototype News Archiving App</a></li>
<li><a class="reference internal" href="#prerequisites">Prerequisites</a></li>
<li><a class="reference internal" href="#development-install">Development Install</a></li>
<li><a class="reference internal" href="#archiving-a-news-app">Archiving a news app</a><ul>
<li><a class="reference internal" href="#step-1-package-a-site-using-reprozip">Step 1: Package a site using ReproZip</a></li>
<li><a class="reference internal" href="#step-2-record-the-site-assets-from-the-rpz-using-webrecord">Step 2: Record the site assets from the RPZ using Webrecord</a></li>
<li><a class="reference internal" href="#step-3-replay-the-site-and-verify-fidelity">Step 3: Replay the site and verify fidelity</a></li>
<li><a class="reference internal" href="#skipping-reprounzip-unpacking-on-subsequent-runs">Skipping reprounzip unpacking on subsequent runs</a></li>
</ul>
</li>
<li><a class="reference internal" href="#flags">Flags</a></li>
</ul>
</li>
<li><a class="reference internal" href="#indices-and-tables">Indices and tables</a></li>
</ul>

  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/index.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="nav-item nav-item-0"><a href="#">reprozip-news-app 2019-2-17 documentation</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2019, Web Archiv.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.7.8.
    </div>
  </body>
</html>